<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- SEO Meta Tags -->
    <title>Ki·ªÉm tra MDM Macbook Online - Ki·ªÉm tra t√¨nh tr·∫°ng qu·∫£n l√Ω thi·∫øt b·ªã Apple mi·ªÖn ph√≠</title>
    <meta name="description" content="C√¥ng c·ª• ki·ªÉm tra MDM Macbook online mi·ªÖn ph√≠. Ki·ªÉm tra t√¨nh tr·∫°ng qu·∫£n l√Ω thi·∫øt b√¨ Apple, Activation Lock, Find My iPhone ch√≠nh x√°c 100%. H·ªó tr·ª£ t·∫•t c·∫£ d√≤ng MacBook, iMac, Mac mini.">
    <meta name="keywords" content="ki·ªÉm tra MDM, MDM checker, macbook mdm, activation lock, find my iphone, apple device management, ki·ªÉm tra macbook, serial number check">
    <meta name="author" content="MDM Checker Tool">
    <meta name="robots" content="index, follow">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://mdmchecker.com/">
    <meta property="og:title" content="Ki·ªÉm tra MDM Macbook Online - C√¥ng c·ª• ki·ªÉm tra Apple Device mi·ªÖn ph√≠">
    <meta property="og:description" content="Ki·ªÉm tra t√¨nh tr·∫°ng MDM, Activation Lock c·ªßa Macbook v√† thi·∫øt b·ªã Apple. K·∫øt qu·∫£ ch√≠nh x√°c, nhanh ch√≥ng v√† mi·ªÖn ph√≠.">
    <meta property="og:image" content="https://mdmchecker.com/images/og-image.jpg">
    <meta property="og:locale" content="vi_VN">
    <meta property="og:site_name" content="MDM Checker">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://mdmchecker.com/">
    <meta property="twitter:title" content="Ki·ªÉm tra MDM Macbook Online - Mi·ªÖn ph√≠">
    <meta property="twitter:description" content="C√¥ng c·ª• ki·ªÉm tra MDM, Activation Lock cho Macbook v√† thi·∫øt b·ªã Apple. Nhanh ch√≥ng, ch√≠nh x√°c, mi·ªÖn ph√≠.">
    <meta property="twitter:image" content="https://mdmchecker.com/images/twitter-image.jpg">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://mdmchecker.com/">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    
    <!-- Preconnect for performance -->
    <link rel="preconnect" href="https://mdmchecker.minhnha93.workers.dev">
    <link rel="preconnect" href="https://qr.sepay.vn">
    
    <!-- Structured Data - JSON-LD -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "MDM Checker - Ki·ªÉm tra MDM Macbook",
        "description": "C√¥ng c·ª• ki·ªÉm tra t√¨nh tr·∫°ng MDM, Activation Lock c·ªßa Macbook v√† thi·∫øt b·ªã Apple online mi·ªÖn ph√≠",
        "url": "https://mdmchecker.com",
        "applicationCategory": "UtilitiesApplication",
        "operatingSystem": "Web Browser",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "VND",
            "description": "Ki·ªÉm tra c∆° b·∫£n mi·ªÖn ph√≠"
        },
        "provider": {
            "@type": "Organization",
            "name": "MDM Checker",
            "url": "https://mdmchecker.com"
        },
        "featureList": [
            "Ki·ªÉm tra MDM Status",
            "Ki·ªÉm tra Activation Lock", 
            "Ki·ªÉm tra Find My iPhone",
            "Th√¥ng tin thi·∫øt b·ªã Apple",
            "H·ªó tr·ª£ t·∫•t c·∫£ d√≤ng MacBook"
        ]
    }
    </script>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            padding: 40px;
            width: 100%;
            max-width: 500px;
            text-align: center;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            body { padding: 10px; }
            .container { padding: 20px; border-radius: 12px; margin: 10px; }
            h1 { font-size: 24px; margin-bottom: 6px; }
            .subtitle { font-size: 14px; margin-bottom: 25px; }
            .logo { width: 50px; height: 50px; font-size: 20px; margin-bottom: 15px; }
        }

        @media (max-width: 480px) {
            .container { padding: 15px; margin: 5px; }
            h1 { font-size: 20px; margin-bottom: 4px; }
            .subtitle { font-size: 12px; margin-bottom: 20px; }
            .logo { width: 40px; height: 40px; font-size: 18px; margin-bottom: 10px; }
            input, select { padding: 12px; font-size: 16px; }
            .btn { padding: 12px; font-size: 14px; margin-top: 8px; }
            .input-group { margin-bottom: 15px; }
            label { margin-bottom: 6px; font-size: 14px; }
        }

        .logo {
            width: 60px;
            height: 60px;
            background: linear-gradient(45deg, #007AFF, #5856D6);
            border-radius: 12px;
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            font-weight: bold;
        }

        h1 {
            color: #1d1d1f;
            font-size: 28px;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .subtitle {
            color: #86868b;
            font-size: 16px;
            margin-bottom: 30px;
        }

        .step {
            display: none;
            animation: fadeIn 0.5s ease-in;
        }

        .step.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .input-group {
            margin-bottom: 20px;
            text-align: left;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #1d1d1f;
        }

        input {
            width: 100%;
            padding: 16px;
            border: 2px solid #e5e5e7;
            border-radius: 12px;
            font-size: 16px;
            transition: border-color 0.2s;
            background: #fafafa;
        }

        input:focus {
            outline: none;
            border-color: #007AFF;
            background: white;
        }

        .service-option {
            background: white;
            border: 2px solid #e5e5e7;
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 12px;
            cursor: pointer;
            transition: all 0.2s;
            text-align: left;
        }

        .service-option:hover {
            border-color: #007AFF;
            background: #f8f9ff;
        }

        .service-option.selected {
            border-color: #007AFF;
            background: #f8f9ff;
        }

        .service-option input[type="radio"] {
            margin-right: 12px;
            width: auto;
            padding: 0;
        }

        .service-title {
            font-weight: 600;
            color: #1d1d1f;
            margin-bottom: 4px;
        }

        .service-price {
            font-size: 18px;
            font-weight: bold;
        }

        .price-free {
            color: #28a745;
        }

        .price-paid {
            color: #007AFF;
        }

        .service-desc {
            font-size: 14px;
            color: #86868b;
            margin-top: 4px;
        }

        .btn {
            width: 100%;
            padding: 16px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            margin-top: 10px;
        }

        .btn-primary {
            background: linear-gradient(45deg, #007AFF, #5856D6);
            color: white;
        }

        .btn-primary:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0,122,255,0.3);
        }

        .btn-secondary {
            background: #f2f2f7;
            color: #1d1d1f;
            border: 2px solid #e5e5e7;
        }

        .btn-secondary:hover {
            background: #e5e5ea;
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .qr-container {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
        }

        .qr-code {
            width: 250px;
            height: 250px;
            background: white;
            border-radius: 8px;
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid #e5e5e7;
            font-size: 12px;
            color: #86868b;
            overflow: hidden;
        }

        .qr-code img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        @media (max-width: 480px) {
            .qr-code { width: 200px; height: 200px; margin-bottom: 10px; }
            .qr-container { padding: 12px; margin: 15px 0; }
            .price { font-size: 18px; margin-bottom: 8px; }
        }

        .price {
            font-size: 24px;
            font-weight: bold;
            color: #007AFF;
            margin-bottom: 10px;
        }

        .payment-info {
            color: #86868b;
            font-size: 14px;
            line-height: 1.5;
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid #f3f3f3;
            border-top: 2px solid #007AFF;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .result {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
        }

        .result-success {
            background: #d4edda;
        }

        .result-error {
            background: #f8d7da;
            color: #721c24;
        }

        .status-info {
            text-align: left;
            margin-top: 15px;
        }

        .status-item {
            padding: 4px 0;
            border-bottom: 1px solid #babbbd;
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
        }

        .status-item:last-child {
            border-bottom: none;
        }

        .status-label {
            font-weight: 500;
            min-width: 100px;
        }

        .status-value {
            color: #86868b;
            text-align: right;
            word-break: break-word;
        }

        @media (max-width: 480px) {
            .status-item { flex-direction: column; align-items: flex-start; gap: 4px; }
            .status-value { text-align: left; font-size: 14px; }
            .result { padding: 15px; }
        }

        .back-btn {
            margin-top: 20px;
        }

        .payment-grid {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 8px;
            font-size: 14px;
        }
        
        @media (max-width: 480px) {
            .payment-grid {
                gap: 3px;
                text-align: left;
                font-size: 13px;
            }
            
            .payment-grid > div:nth-child(even) {
                margin-bottom: 8px;
                padding-left: 8px;
            }
        }

        /* Styles cho toggle */
        .toggle-section {
            text-align: center;
            margin-bottom: 20px;
        }

        .toggle-btn {
            background: #f8f9ff;
            border: 2px solid #007AFF;
            color: #007AFF;
            padding: 10px 20px;
            border-radius: 25px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 15px;
        }

        .toggle-btn:hover {
            background: #007AFF;
            color: white;
        }

        .toggle-btn.active {
            background: #007AFF;
            color: white;
        }

        /* Styles cho ph·∫ßn m√£ thanh to√°n */
        .payment-code-section {
            background: #f8f9ff;
            border: 2px solid #e5e5e7;
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 20px;
            display: none;
            animation: slideDown 0.3s ease-out;
        }

        .payment-code-section.show {
            display: block;
        }

        @keyframes slideDown {
            from { 
                opacity: 0; 
                transform: translateY(-10px); 
                max-height: 0;
            }
            to { 
                opacity: 1; 
                transform: translateY(0); 
                max-height: 200px;
            }
        }

        .payment-code-header {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
            font-weight: 600;
            color: #007AFF;
            font-size: 14px;
        }

        .payment-code-description {
            font-size: 13px;
            color: #86868b;
            margin-bottom: 12px;
            line-height: 1.4;
        }

        .divider {
            position: relative;
            text-align: center;
            margin: 20px 0;
            color: #86868b;
            font-size: 14px;
        }

        .divider::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 1px;
            background: #e5e5e7;
        }

        .divider span {
            background: white;
            padding: 0 15px;
            position: relative;
        }

        .device-thumbnail {
            width: 200px;
            height: 120px;
            margin: 0 auto 20px;
            border-radius: 12px;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .device-thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .device-thumbnail.placeholder {
            color: #86868b;
            font-size: 14px;
            text-align: center;
            padding: 10px;
        }

        /* SEO Content Section */
        .seo-content {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            margin-top: 30px;
            text-align: left;
            font-size: 14px;
            line-height: 1.6;
            color: #1d1d1f;
        }

        .seo-content h2 {
            font-size: 18px;
            color: #007AFF;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .seo-content h3 {
            font-size: 16px;
            color: #1d1d1f;
            margin: 15px 0 10px 0;
            font-weight: 600;
        }

        .seo-content p {
            margin-bottom: 12px;
        }

        .seo-content ul {
            margin: 10px 0 10px 20px;
        }

        .seo-content li {
            margin-bottom: 5px;
        }

        @media (max-width: 480px) {
            .seo-content {
                padding: 15px;
                margin-top: 20px;
                font-size: 13px;
            }
            
            .seo-content h2 {
                font-size: 16px;
            }
            
            .seo-content h3 {
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="logo">
            <svg width="48" height="60" viewBox="0 0 24 30" fill="white" style="margin-top: 5px;" aria-hidden="true">
                <path d="M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"/>
            </svg>
        </div>
        <h1>Ki·ªÉm tra MDM Macbook</h1>
        <p class="subtitle">Ki·ªÉm tra t√¨nh tr·∫°ng qu·∫£n l√Ω thi·∫øt b·ªã c·ªßa Macbook</p>

        <!-- B∆∞·ªõc 1: Ch·ªçn lo·∫°i d·ªãch v·ª• v√† nh·∫≠p Serial Number -->
        <div id="step1" class="step active">
            <!-- Toggle cho m√£ thanh to√°n -->
            <div class="toggle-section">
                <button type="button" class="toggle-btn" id="togglePaymentCode" onclick="togglePaymentCodeSection()" aria-label="Hi·ªÉn th·ªã/·∫©n ph·∫ßn nh·∫≠p m√£ thanh to√°n">
                    üí≥ ƒê√£ c√≥ m√£ thanh to√°n?
                </button>
            </div>
            <!-- Ph·∫ßn m√£ thanh to√°n c√≥ s·∫µn -->
            <div class="payment-code-section" id="paymentCodeSection">
                <div class="payment-code-header">
                    üí≥ Nh·∫≠p m√£ thanh to√°n c√≥ s·∫µn
                </div>
                <div class="payment-code-description">
                    N·∫øu b·∫°n ƒë√£ thanh to√°n tr∆∞·ªõc ƒë√≥ v√† c√≥ m√£ giao d·ªãch, nh·∫≠p v√†o ƒë√¢y.
                </div>
                <input 
                    type="text" 
                    id="paymentCodeInput" 
                    placeholder="V√≠ d·ª•: MDM12345678ABCD"
                    maxlength="16"
                    style="margin-bottom: 0;"
                    aria-label="M√£ thanh to√°n"
                >
            </div>

            <div class="divider">
                <span>Ch·ªçn d·ªãch v·ª•</span>
            </div>

            <div class="input-group">
            </div>

            <div class="input-group">
                <label for="serialNumber">S·ªë Serial Number *</label>
                <input 
                    type="text" 
                    id="serialNumber" 
                    placeholder="V√≠ d·ª•: C02Z41234567"
                    maxlength="20"
                    required
                    aria-describedby="serialHelp"
                >
                <small id="serialHelp" style="color: #86868b; font-size: 12px; margin-top: 4px; display: block;">
                    T√¨m Serial Number ·ªü: Apple Menu > About This Mac ho·∫∑c d∆∞·ªõi ƒë·∫ø m√°y
                </small>
                <div id="serialWarning" class="warning-message" style="display: none; color: #dc3545; font-size: 14px; margin-top: 8px; padding: 8px; background: #f8d7da; border-radius: 6px; border-left: 4px solid #dc3545;">
                    ‚ö†Ô∏è Vui l√≤ng nh·∫≠p s·ªë Serial Number
                </div>
            </div>
            <button class="btn btn-primary" onclick="checkSerial()" aria-label="B·∫Øt ƒë·∫ßu ki·ªÉm tra t√¨nh tr·∫°ng MDM">
                Ki·ªÉm tra t√¨nh tr·∫°ng
            </button>
        </div>

        <!-- B∆∞·ªõc 2: Hi·ªÉn th·ªã QR thanh to√°n -->
        <div id="step2" class="step">
            <h2 style="margin-bottom: 20px; color: #1d1d1f;">Thanh to√°n d·ªãch v·ª•</h2>
            
            <div class="qr-container">
                <div class="qr-code" id="qrCode" role="img" aria-label="M√£ QR thanh to√°n">
                    QR Code s·∫Ω hi·ªÉn th·ªã ·ªü ƒë√¢y
                </div>
                <div class="price" id="paymentPrice">25,000 VNƒê</div>
                <div class="payment-info">
                    Qu√©t m√£ QR ƒë·ªÉ thanh to√°n<br>
                    Sau khi thanh to√°n, nh·∫•n n√∫t "ƒê√£ thanh to√°n"
                </div>
            </div>

            <button class="btn btn-primary" onclick="confirmPayment()" aria-label="X√°c nh·∫≠n ƒë√£ thanh to√°n">
                ‚úì ƒê√£ thanh to√°n
            </button>
            <button class="btn btn-secondary" onclick="goBack(1)" aria-label="Quay l·∫°i b∆∞·ªõc tr∆∞·ªõc">
                ‚Üê Quay l·∫°i
            </button>
        </div>

        <!-- B∆∞·ªõc 3: ƒêang x·ª≠ l√Ω -->
        <div id="step3" class="step">
            <h2 style="margin-bottom: 20px; color: #1d1d1f;">ƒêang ki·ªÉm tra...</h2>
            
            <div style="padding: 40px 0;" role="status" aria-live="polite">
                <div class="loading" aria-hidden="true"></div>
                <p id="loadingText">ƒêang k·∫øt n·ªëi v·ªõi server Apple ƒë·ªÉ ki·ªÉm tra t√¨nh tr·∫°ng...</p>
                <p style="color: #86868b; font-size: 14px; margin-top: 10px;">
                    Qu√° tr√¨nh n√†y c√≥ th·ªÉ m·∫•t 10-30 gi√¢y
                </p>
            </div>
        </div>

        <!-- B∆∞·ªõc 4: Hi·ªÉn th·ªã k·∫øt qu·∫£ -->
        <div id="step4" class="step">
            <h2 style="margin-bottom: 20px; color: #1d1d1f;">K·∫øt qu·∫£ ki·ªÉm tra</h2>
            
            <div id="resultContainer" class="result" role="region" aria-label="K·∫øt qu·∫£ ki·ªÉm tra MDM">
                <!-- K·∫øt qu·∫£ s·∫Ω ƒë∆∞·ª£c hi·ªÉn th·ªã ·ªü ƒë√¢y -->
            </div>

            <button class="btn btn-primary back-btn" onclick="startOver()" aria-label="Ki·ªÉm tra thi·∫øt b·ªã kh√°c">
                Ki·ªÉm tra thi·∫øt b·ªã kh√°c
            </button>
            
            <!-- N√∫t quay l·∫°i khi c√≥ l·ªói ƒë·ªÉ t√°i s·ª≠ d·ª•ng m√£ -->
            <button class="btn btn-secondary back-btn" id="retryBtn" onclick="retryWithSameCode()" style="display: none;" aria-label="Th·ª≠ l·∫°i v·ªõi m√£ thanh to√°n hi·ªán t·∫°i">
                ‚Üª Th·ª≠ l·∫°i v·ªõi m√£ c≈©
            </button>
        </div>

        <!-- SEO Content Section -->
        <section class="seo-content">
            <h2>Ki·ªÉm tra MDM Macbook - C√¥ng c·ª• chuy√™n nghi·ªáp</h2>
            <p>
                <strong>MDM Checker</strong> l√† c√¥ng c·ª• ki·ªÉm tra t√¨nh tr·∫°ng qu·∫£n l√Ω thi·∫øt b·ªã (Mobile Device Management) 
                cho c√°c s·∫£n ph·∫©m Apple nh∆∞ MacBook, iMac, Mac mini m·ªôt c√°ch nhanh ch√≥ng v√† ch√≠nh x√°c.
            </p>

            <h3>üîç Nh·ªØng g√¨ ch√∫ng t√¥i ki·ªÉm tra:</h3>
            <ul>
                <li><strong>MDM Status</strong> - T√¨nh tr·∫°ng qu·∫£n l√Ω thi·∫øt b·ªã t·ª´ t·ªï ch·ª©c</li>
                <li><strong>Activation Lock</strong> - Kh√≥a k√≠ch ho·∫°t Find My</li>
                <li><strong>Find My iPhone/Mac</strong> - T√≠nh nƒÉng t√¨m ki·∫øm thi·∫øt b·ªã</li>
                <li><strong>Warranty Status</strong> - T√¨nh tr·∫°ng b·∫£o h√†nh Apple</li>
                <li><strong>Device Information</strong> - Th√¥ng tin chi ti·∫øt v·ªÅ m√°y</li>
            </ul>

            <h3>‚úÖ T·∫°i sao ch·ªçn ch√∫ng t√¥i:</h3>
            <ul>
                <li>‚úì K·∫øt qu·∫£ ch√≠nh x√°c 100% t·ª´ server Apple</li>
                <li>‚úì H·ªó tr·ª£ t·∫•t c·∫£ d√≤ng MacBook, iMac, Mac mini</li>
                <li>‚úì Giao di·ªán th√¢n thi·ªán, d·ªÖ s·ª≠ d·ª•ng</li>
                <li>‚úì B·∫£o m·∫≠t th√¥ng tin tuy·ªát ƒë·ªëi</li>
                <li>‚úì H·ªó tr·ª£ ti·∫øng Vi·ªát</li>
                <li>‚úì Ki·ªÉm tra c∆° b·∫£n mi·ªÖn ph√≠</li>
            </ul>

            <h3>üì± H∆∞·ªõng d·∫´n t√¨m Serial Number:</h3>
            <p>
                <strong>C√°ch 1:</strong> Apple Menu ‚Üí About This Mac ‚Üí Serial Number<br>
                <strong>C√°ch 2:</strong> System Settings ‚Üí General ‚Üí About<br>
                <strong>C√°ch 3:</strong> Ki·ªÉm tra d∆∞·ªõi ƒë·∫ø m√°y ho·∫∑c trong h·ªôp s·∫£n ph·∫©m
            </p>

            <p>
                C√¥ng c·ª• ki·ªÉm tra MDM c·ªßa ch√∫ng t√¥i ƒë·∫∑c bi·ªát h·ªØu √≠ch khi b·∫°n c·∫ßn mua MacBook c≈©, 
                ki·ªÉm tra thi·∫øt b·ªã c√¥ng ty, ho·∫∑c x√°c minh t√¨nh tr·∫°ng kh√≥a k√≠ch ho·∫°t tr∆∞·ªõc khi giao d·ªãch.
            </p>
        </section>

        <!-- Contact Section -->
        <section class="contact-section">
            <div style="background: #f8f9ff; border: 2px solid #007AFF; border-radius: 12px; padding: 16px; margin: 20px 0; text-align: center;">
                <h3 style="color: #007AFF; margin-bottom: 10px; font-size: 16px;">üìû H·ªó tr·ª£ & Li√™n h·ªá</h3>
                <p style="color: #1d1d1f; margin-bottom: 12px; font-size: 14px;">
                    C·∫ßn h·ªó tr·ª£ ho·∫∑c c√≥ c√¢u h·ªèi? Li√™n h·ªá v·ªõi ch√∫ng t√¥i:
                </p>
                <a href="https://www.facebook.com/thien.thu.92904" target="_blank" rel="noopener noreferrer" 
                   style="display: inline-flex; align-items: center; gap: 8px; background: #1877f2; color: white; padding: 10px 20px; border-radius: 25px; text-decoration: none; font-weight: 600; font-size: 14px; transition: all 0.2s;" 
                   onmouseover="this.style.background='#166fe5'" onmouseout="this.style.background='#1877f2'">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                    </svg>
                    Li√™n h·ªá Facebook
                </a>
            </div>
        </section>
    </div>

    <script>
        let currentStep = 1;
        let currentSerial = '';
        let currentTransCode = '';
        let selectedService = null;
        let products = {};
        let hasError = false; // Bi·∫øn ƒë·ªÉ theo d√µi tr·∫°ng th√°i l·ªói

        // Load products t·ª´ API khi trang load
        function loadProducts() {
            fetch('https://mdmchecker.minhnha93.workers.dev/api/products', {
                method: 'GET',
                mode: 'cors',
                headers: {
                    'Accept': 'application/json',
                }
            })
            .then(function(response) {
                if (!response.ok) {
                    throw new Error('Failed to load products');
                }
                return response.json();
            })
            .then(function(data) {
                products = data;
                updateServiceOptions();
            })
            .catch(function(error) {
                console.error('Error loading products:', error);
                // Kh√¥ng hi·ªÉn th·ªã g√¨ n·∫øu l·ªói API
                document.querySelector('.input-group').innerHTML = '<label>Ch·ªçn lo·∫°i ki·ªÉm tra</label><p style="color: #dc3545; padding: 20px; text-align: center;">Kh√¥ng th·ªÉ t·∫£i danh s√°ch d·ªãch v·ª•. Vui l√≤ng th·ª≠ l·∫°i sau.</p>';
            });
        }

        function updateServiceOptions() {
            var serviceContainer = document.querySelector('.input-group');
            var serviceOptionsHTML = '<label>Ch·ªçn lo·∫°i ki·ªÉm tra</label>';
            
            for (var serviceId in products) {
                var product = products[serviceId];
                var priceText = product.price === 0 ? 'Mi·ªÖn ph√≠' : formatPrice(product.price) + ' VNƒê';
                var priceClass = product.price === 0 ? 'price-free' : 'price-paid';
                
                serviceOptionsHTML += '<div class="service-option" onclick="selectService(' + serviceId + ')"><input type="radio" name="serviceType" value="' + serviceId + '" id="service' + serviceId + '"><label for="service' + serviceId + '" style="margin: 0; cursor: pointer;"><div class="service-title">' + product.name + '</div><div class="service-price ' + priceClass + '">' + priceText + '</div></label></div>';
            }
            
            serviceContainer.innerHTML = serviceOptionsHTML;
        }

        function showWarning(message, type) {
            // var warningElement = document.getElementById('serialWarning');
            // warningElement.textContent = '‚ö†Ô∏è ' + message;
            // warningElement.style.display = 'block';
            
            // // T·ª± ƒë·ªông ·∫©n sau 5 gi√¢y
            // setTimeout(function() {
            //     warningElement.style.display = 'none';
            // }, 5000);
        }

        function hideWarning() {
            // document.getElementById('serialWarning').style.display = 'none';
        }

        function showStep(step) {
            document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
            document.getElementById('step' + step).classList.add('active');
            currentStep = step;
            
            // Scroll to top khi chuy·ªÉn b∆∞·ªõc
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }

        function selectService(serviceValue) {
            selectedService = serviceValue;
            
            document.querySelectorAll('.service-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            const selectedOption = document.querySelector('input[value="' + serviceValue + '"]').closest('.service-option');
            selectedOption.classList.add('selected');
            
            document.getElementById('service' + serviceValue).checked = true;
            updatePaymentStep();
        }

        function togglePaymentCodeSection() {
            const section = document.getElementById('paymentCodeSection');
            const toggle = document.getElementById('togglePaymentCode');
            
            if (section.classList.contains('show')) {
                // ·∫®n section
                section.classList.remove('show');
                toggle.classList.remove('active');
                toggle.innerHTML = 'üí≥ ƒê√£ c√≥ m√£ thanh to√°n?';
                // Clear input khi ·∫©n
                document.getElementById('paymentCodeInput').value = '';
            } else {
                // Hi·ªán section
                section.classList.add('show');
                toggle.classList.add('active');
                toggle.innerHTML = '‚ùå ·∫®n m√£ thanh to√°n';
                // Focus v√†o input
                setTimeout(() => {
                    document.getElementById('paymentCodeInput').focus();
                }, 300);
            }
        }

        function checkSerial() {
            const serialInput = document.getElementById('serialNumber');
            const serial = serialInput.value.trim().toUpperCase();
            const paymentCodeInput = document.getElementById('paymentCodeInput');
            const paymentCode = paymentCodeInput.value.trim().toUpperCase();

            // Ki·ªÉm tra service ƒë∆∞·ª£c ch·ªçn
            if (selectedService === null) {
                return;
            }

            if (!serial) {
                return;
            }

            currentSerial = serial;

            // Ki·ªÉm tra n·∫øu c√≥ m√£ thanh to√°n v√† service kh√¥ng mi·ªÖn ph√≠
            if (paymentCode && selectedService !== 0) {
                // S·ª≠ d·ª•ng m√£ thanh to√°n c√≥ s·∫µn
                currentTransCode = paymentCode;
                proceedToCheck();
                return;
            }

            // Logic b√¨nh th∆∞·ªùng
            if (selectedService === 0) {
                proceedToCheck();
            } else {
                generateQRCode();
                showStep(2);
            }
        }

        function proceedToCheck() {
            showStep(3);

            const loadingText = document.getElementById('loadingText');
            if (selectedService === 0) {
                loadingText.textContent = 'ƒêang ki·ªÉm tra th√¥ng tin c∆° b·∫£n c·ªßa thi·∫øt b·ªã...';
            } else {
                loadingText.textContent = 'ƒêang k·∫øt n·ªëi v·ªõi server Apple ƒë·ªÉ ki·ªÉm tra t√¨nh tr·∫°ng MDM...';
            }
            
            setTimeout(function() {
                checkDeviceStatus();
            }, 100);
        }

        function generateTransCode() {
            const timestamp = Date.now().toString().slice(-8);
            const random = Math.random().toString(36).substr(2, 4).toUpperCase();
            return 'MDM' + timestamp + random;
        }

        function updatePaymentStep() {
            var currentPrice = products[selectedService].price;
            var serviceName = products[selectedService].name;

            // C·∫≠p nh·∫≠t header
            document.querySelector('#step2 h2').textContent = 'Thanh to√°n ' + serviceName;
            
            // C·∫≠p nh·∫≠t gi√° hi·ªÉn th·ªã
            document.getElementById('paymentPrice').textContent = formatPrice(currentPrice) + ' VNƒê';
        }

        function generateQRCode() {
            const transCode = generateTransCode();
            currentTransCode = transCode;

            var currentPrice = products[selectedService].price
            formatPrice(currentPrice)
            const qrContainer = document.getElementById('qrCode');
            
            qrContainer.innerHTML = '<img src="https://qr.sepay.vn/img?acc=4488866&bank=ACB&amount=' + currentPrice + '&des=' + transCode + '" alt="QR Code thanh to√°n" onload="this.nextElementSibling.style.display=\'none\';" onerror="this.style.display=\'none\'; this.nextElementSibling.style.display=\'block\';"><div style="display: none; color: #86868b; padding: 20px; text-align: center;"><p>‚ö†Ô∏è Kh√¥ng th·ªÉ t·∫£i QR Code t·ª± ƒë·ªông</p><p style="margin: 10px 0;"><a href="https://qr.sepay.vn/img?acc=4488866&bank=ACB&amount=25000&des=' + transCode + '" target="_blank" style="color: #007AFF; text-decoration: none; font-weight: bold;">üëÜ Click ƒë·ªÉ xem QR Code</a></p><small>M√£ giao d·ªãch: <strong>' + transCode + '</strong></small></div>';

            const paymentInfoDiv = document.querySelector('.payment-info');
            paymentInfoDiv.innerHTML = '<div style="background: #f8f9fa; border-radius: 8px; padding: 15px; margin-bottom: 15px;"><div class="payment-grid"><div style="font-weight: 600; color: #1d1d1f;">Ng√¢n h√†ng:</div><div style="color: #007AFF; font-weight: 600;">ACB (√Å Ch√¢u Bank)</div><div style="font-weight: 600; color: #1d1d1f;">S·ªë t√†i kho·∫£n:</div><div style="font-family: monospace; font-size: 16px; font-weight: bold; color: #1d1d1f;">4488866</div><div style="font-weight: 600; color: #1d1d1f;">Th·ª• h∆∞·ªüng:</div><div style="font-weight: bold; color: #1d1d1f;">HO MINH NHA</div><div style="font-weight: 600; color: #1d1d1f;">S·ªë ti·ªÅn:</div><div style="font-size: 18px; font-weight: bold; color: #28a745;">' + formatPrice(currentPrice) + ' VNƒê</div><div style="font-weight: 600; color: #1d1d1f;">N·ªôi dung CK:</div><div style="background: #007AFF; color: white; padding: 4px 8px; border-radius: 4px; font-family: monospace; font-weight: bold; text-align: center; word-break: break-all;">' + transCode + '</div></div></div><div style="text-align: center; padding: 10px; background: #f0f8ff; border-radius: 8px; margin-top: 10px;"><p style="margin: 5px 0; font-size: 15px; color: #1d1d1f;">üì± Qu√©t QR b·∫±ng app ng√¢n h√†ng</p><p style="margin: 5px 0; font-size: 15px; color: #1d1d1f;">üí∞ Ho·∫∑c chuy·ªÉn kho·∫£n th·ªß c√¥ng</p><p style="margin: 8px 0; font-size: 16px; font-weight: 700; color: #dc3545;">‚ö†Ô∏è Nh·∫≠p ch√≠nh x√°c n·ªôi dung CK</p></div>';
        }

        function confirmPayment() {
            proceedToCheck();
        }

        function checkDeviceStatus() {
            const resultContainer = document.getElementById('resultContainer');
            
            // Chu·∫©n b·ªã data cho API
            const apiData = {
                imei: currentSerial,
                service: selectedService,
                transfer_code: selectedService === 0 ? "" : currentTransCode
            };
            
            // G·ªçi API (v·ªõi proxy backup n·∫øu CORS l·ªói)
            var apiUrl = 'https://mdmchecker.minhnha93.workers.dev/api/check';
            // Uncomment d√≤ng d∆∞·ªõi n·∫øu v·∫´n l·ªói CORS:
            // apiUrl = 'https://cors-anywhere.herokuapp.com/' + apiUrl;
            
            fetch(apiUrl, {
                method: 'POST',
                mode: 'cors',
                headers: {
                    'Content-Type': 'application/json',
                    'Accept': 'application/json',
                },
                body: JSON.stringify(apiData)
            })
            .then(function(response) {
                if (!response.ok) {
                    throw new Error('Network response was not ok: ' + response.status);
                }
                return response.json();
            })
            .then(function(data) {
                displayResult(data);
            })
            .catch(function(error) {
                console.error('API Error:', error);
                hasError = true; // ƒê√°nh d·∫•u c√≥ l·ªói
                // Hi·ªÉn th·ªã l·ªói cho user
                resultContainer.className = 'result result-error';
                resultContainer.innerHTML = '<h3 style="margin-bottom: 15px;">‚ùå Kh√¥ng th·ªÉ ki·ªÉm tra</h3><p>Kh√¥ng t√¨m th·∫•y thi·∫øt b·ªã ho·∫∑c sai m√£ chuy·ªÉn kho·∫£n. Vui l√≤ng th·ª≠ l·∫°i.</p><p style="font-size: 12px; color: #86868b; margin-top: 10px;">N·∫øu b·∫°n ƒë√£ thanh to√°n, m√£ giao d·ªãch c·ªßa b·∫°n v·∫´n c√≥ hi·ªáu l·ª±c.</p>';
                
                // Hi·ªÉn th·ªã n√∫t retry n·∫øu c√≥ m√£ thanh to√°n
                if (currentTransCode && selectedService !== 0) {
                    document.getElementById('retryBtn').style.display = 'block';
                }
                
                showStep(4);
            });
        }

        function displayResult(apiResponse) {
            const resultContainer = document.getElementById('resultContainer');
            hasError = false; // Reset tr·∫°ng th√°i l·ªói khi c√≥ k·∫øt qu·∫£ th√†nh c√¥ng
            
            // ·∫®n n√∫t retry khi c√≥ k·∫øt qu·∫£ th√†nh c√¥ng
            document.getElementById('retryBtn').style.display = 'none';
            
            // Ki·ªÉm tra status t·ª´ API response
            if (apiResponse.success === false) {
                hasError = true; // ƒê√°nh d·∫•u c√≥ l·ªói t·ª´ API
                // API tr·∫£ v·ªÅ l·ªói
                resultContainer.className = 'result result-error';
                resultContainer.innerHTML = '<h3 style="margin-bottom: 15px;">‚ùå L·ªói</h3><p>' + (apiResponse.message || 'C√≥ l·ªói x·∫£y ra khi ki·ªÉm tra thi·∫øt b·ªã') + '</p>';
                
                // Hi·ªÉn th·ªã n√∫t retry n·∫øu c√≥ m√£ thanh to√°n
                if (currentTransCode && selectedService !== 0) {
                    document.getElementById('retryBtn').style.display = 'block';
                }
                
                showStep(4);
                return;
            }
            
            // Hi·ªÉn th·ªã k·∫øt qu·∫£ th√†nh c√¥ng - SHOW T·∫§T C·∫¢ DATA T·ª™ API
            resultContainer.className = 'result result-success';
            
            var resultHTML = '<h3 style="margin-bottom: 15px;">‚úÖ K·∫øt qu·∫£ ki·ªÉm tra</h3>';
            
            // Hi·ªÉn th·ªã thumbnail n·∫øu c√≥
            if (apiResponse.data && apiResponse.data.thumbnail) {
                resultHTML += '<div class="device-thumbnail"><img src="' + apiResponse.data.thumbnail + '" alt="H√¨nh ·∫£nh thi·∫øt b·ªã"></div>'
            }
            
            resultHTML += '<p>Thi·∫øt b·ªã v·ªõi Serial Number <strong>' + currentSerial + '</strong></p>';
            resultHTML += '<div class="status-info">';
            
            // Th√™m Serial Number
            resultHTML += '<div class="status-item"><span class="status-label">Serial Number:</span><span class="status-value">' + currentSerial + '</span></div>';
            
            // Hi·ªÉn th·ªã T·∫§T C·∫¢ data t·ª´ API response (tr·ª´ thumbnail ƒë√£ hi·ªÉn th·ªã ·ªü tr√™n)
            if (apiResponse.data && typeof apiResponse.data === 'object') {
                for (var key in apiResponse.data) {
                    if (apiResponse.data.hasOwnProperty(key) && key !== 'thumbnail') {
                        var value = apiResponse.data[key];
                        var displayKey = formatKey(key);
                        var displayValue = formatValue(key, value);
                        
                        resultHTML += '<div class="status-item"><span class="status-label">' + displayKey + ':</span><span class="status-value">' + displayValue + '</span></div>';
                    }
                }
            }
            
            resultHTML += '</div>';
            
            resultContainer.innerHTML = resultHTML;
            showStep(4);
        }

        // Helper function ƒë·ªÉ format key cho hi·ªÉn th·ªã
        function formatKey(key) {
            const keyMap = {
                'modelDesc': 'M√£ M√°y',
                'model': 'T√™n d√≤ng', 
                'activated': 'ƒê√£ k√≠ch ho·∫°t',
                'warrantyStatus': 'B·∫£o h√†nh',
                'estPurchaseDate': 'Ng√†y mua d·ª± ki·∫øn',
                'replaced': 'M·∫•t b·∫£o h√†nh',
                'refurbished': 'H√†ng t√¢n trang',
                'demoUnit': 'H√†ng tr∆∞ng b√†y',
                'loaner': 'H√†ng n·ª£ tr·∫£ g√≥p',
                'carrier': 'Nh√† m·∫°ng',
                'acEligible': 'ƒê∆∞·ª£c mua AppleCare',
                'validPurchaseDate': 'Ng√†y mua ch√≠nh th·ª©c',
                'registered': 'ƒê√£ ƒëƒÉng k√≠',
                'replacement': 'ƒê∆∞·ª£c ƒë·ªïi m·ªõi',
                'fmiOn': 'Find my device',
                'isAppleDevice': 'H√†ng Apple',
                'simLock': 'B·ªã kho√° Sim',
                'technicalSupport': 'H·ªó tr·ª£ kƒ© thu·∫≠t',
                'repairCoverage': 'H·ªó tr·ª£ s·ª≠a ch·ªØa',
                'mdmLock': 'M√°y MDM'
            };
            return keyMap[key] || key.replace(/_/g, ' ').replace(/\b\w/g, l => l.toUpperCase());
        }

        // Helper function ƒë·ªÉ format value cho hi·ªÉn th·ªã
        function formatValue(key, value) {
            if (value === null || value === undefined) {
                return '<span style="color: #86868b;">N/A</span>';
            }
            
            // Boolean values - TRUE = ƒê·ªé, FALSE = XANH L√Å
            if (typeof value === 'boolean') {
                var status, color;
                
                if (value === true) {
                    // TRUE -> m√†u ƒë·ªè
                    if (key === 'fmiOn') {
                        status = 'B·∫≠t';
                    } else if (key === 'mdmLock') {
                        status = 'C√≥ qu·∫£n l√Ω';
                    } else {
                        status = 'C√≥';
                    }
                    color = '#dc3545'; // ƒë·ªè
                } else {
                    // FALSE -> m√†u xanh l√°
                    if (key === 'fmiOn') {
                        status = 'T·∫Øt';
                    } else if (key === 'mdmLock') {
                        status = 'Kh√¥ng c√≥';
                    } else {
                        status = 'Kh√¥ng';
                    }
                    color = '#28a745'; // xanh l√°
                }
                
                return '<span style="color: ' + color + '; font-weight: bold;">' + status + '</span>';
            }
            
            // String values
            if (typeof value === 'string') {
                return '<span style="color: #1d1d1f;">' + value + '</span>';
            }
            
            // Number values
            if (typeof value === 'number') {
                return '<span style="color: #1d1d1f;">' + value.toString() + '</span>';
            }
            
            // Object or array values - m√†u tr·∫Øng (m·∫∑c ƒë·ªãnh)
            if (typeof value === 'object') {
                return '<span style="color: #1d1d1f;">' + JSON.stringify(value) + '</span>';
            }
            
            // C√°c gi√° tr·ªã kh√°c - m√†u tr·∫Øng (m·∫∑c ƒë·ªãnh)
            return '<span style="color: #1d1d1f;">' + value.toString() + '</span>';
        }

        function goBack(step) {
            showStep(step);
        }

        function startOver() {
            document.getElementById('serialNumber').value = '';
            document.getElementById('paymentCodeInput').value = '';
            
            // Reset toggle v·ªÅ tr·∫°ng th√°i ban ƒë·∫ßu
            const section = document.getElementById('paymentCodeSection');
            const toggle = document.getElementById('togglePaymentCode');
            section.classList.remove('show');
            toggle.classList.remove('active');
            toggle.innerHTML = 'üí≥ ƒê√£ c√≥ m√£ thanh to√°n?';
            
            hideWarning(); // ·∫®n warning khi start over
            currentSerial = '';
            currentTransCode = '';
            selectedService = null;
            hasError = false; // Reset tr·∫°ng th√°i l·ªói
            
            // ·∫®n n√∫t retry
            document.getElementById('retryBtn').style.display = 'none';
            
            document.querySelectorAll('.service-option').forEach(function(option) {
                option.classList.remove('selected');
            });
            document.querySelectorAll('input[name="serviceType"]').forEach(function(radio) {
                radio.checked = false;
            });
            
            showStep(1);
        }

        // H√†m th·ª≠ l·∫°i v·ªõi m√£ thanh to√°n hi·ªán t·∫°i
        function retryWithSameCode() {
            if (currentTransCode && currentSerial && selectedService !== null) {
                // T·ª± ƒë·ªông ƒëi·ªÅn l·∫°i th√¥ng tin v√† th·ª≠ l·∫°i
                document.getElementById('serialNumber').value = currentSerial;
                
                // N·∫øu c√≥ m√£ thanh to√°n, hi·ªÉn th·ªã v√† ƒëi·ªÅn v√†o
                if (currentTransCode) {
                    const section = document.getElementById('paymentCodeSection');
                    const toggle = document.getElementById('togglePaymentCode');
                    section.classList.add('show');
                    toggle.classList.add('active');
                    toggle.innerHTML = '‚ùå ·∫®n m√£ thanh to√°n';
                    document.getElementById('paymentCodeInput').value = currentTransCode;
                }
                
                // Ch·ªçn l·∫°i service
                if (selectedService !== null) {
                    selectService(selectedService);
                }
                
                hasError = false; // Reset tr·∫°ng th√°i l·ªói
                showStep(1);
            } else {
                // Fallback - quay v·ªÅ b∆∞·ªõc 1
                startOver();
            }
        }

        function formatPrice(price) {
            return price.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',');
        }

        // Events
        document.getElementById('serialNumber').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                checkSerial();
            }
        });

        document.getElementById('paymentCodeInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                checkSerial();
            }
        });

        // ·∫®n warning khi user b·∫Øt ƒë·∫ßu nh·∫≠p
        document.getElementById('serialNumber').addEventListener('input', function() {
            hideWarning();
        });

        // Auto format m√£ thanh to√°n th√†nh ch·ªØ hoa
        document.getElementById('paymentCodeInput').addEventListener('input', function(e) {
            e.target.value = e.target.value.toUpperCase();
        });

        // Auto focus v√† load products
        window.onload = function() {
            loadProducts();
            document.getElementById('serialNumber').focus();
        };
    </script>
</body>
</html>